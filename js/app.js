(function(t){function e(e){for(var s,o,l=e[0],i=e[1],c=e[2],u=0,f=[];u<l.length;u++)o=l[u],Object.prototype.hasOwnProperty.call(r,o)&&r[o]&&f.push(r[o][0]),r[o]=0;for(s in i)Object.prototype.hasOwnProperty.call(i,s)&&(t[s]=i[s]);d&&d(e);while(f.length)f.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var t,e=0;e<n.length;e++){for(var a=n[e],s=!0,l=1;l<a.length;l++){var i=a[l];0!==r[i]&&(s=!1)}s&&(n.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},r={app:0},n=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/ipad_app/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],i=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var d=i;n.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";var s=a("85ec"),r=a.n(s);r.a},"03ea":function(t,e,a){},1425:function(t,e,a){"use strict";var s=a("ae4d"),r=a.n(s);r.a},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(t){var e=n(t);return a(e)}function n(t){if(!a.o(s,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return s[t]}r.keys=function(){return Object.keys(s)},r.resolve=n,t.exports=r,r.id="4678"},5206:function(t,e,a){"use strict";var s=a("8bb2"),r=a.n(s);r.a},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var s=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("router-view")},n=[],o={name:"app"},l=o,i=(a("034f"),a("2877")),c=Object(i["a"])(l,r,n,!1,null,null,null),d=c.exports,u=(a("c975"),a("323e")),f=a.n(u),m=a("8c4f"),p=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"login-container"},[a("el-form",{staticClass:"login-form",attrs:{autocomplete:"on","label-position":"left"}},[a("h3",{staticClass:"title"},[t._v("請登入")]),a("el-form-item",[a("el-input",{attrs:{placeholder:"StaffID"},model:{value:t.username,callback:function(e){t.username=e},expression:"username"}},[a("i",{staticClass:"el-input__icon el-icon-user",attrs:{slot:"prefix"},slot:"prefix"})]),a("el-input",{attrs:{placeholder:"Password","show-password":""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}},[a("i",{staticClass:"el-input__icon el-icon-key",attrs:{slot:"prefix"},slot:"prefix"})])],1),a("el-button",{staticClass:"push-right",attrs:{loading:t.loading,type:"primary"},nativeOn:{click:function(e){return e.preventDefault(),t.handleLogin(e)}}},[t._v("登入")])],1)],1)},b=[],_=(a("d3b7"),a("96cf"),a("1da1")),v=a("bc3a"),h=a.n(v),g={getItem:function(t){var e=window.sessionStorage.getItem(t);return JSON.parse(e)},setItem:function(t,e){window.sessionStorage.setItem(t,JSON.stringify(e))},KEY:{JWT_TOKEN:"JWT_TOKEN",CART_DATA:"CART_DATA",FORM_DATA:"FORM_DATA",USER_INFO:"USER_INFO"}},D=h.a.create({baseURL:"/ipad_app/api/",timeout:5e3});D.interceptors.request.use((function(t){return t.headers.Authorization="Bearer ".concat(g.getItem(g.KEY.JWT_TOKEN)),f.a.start(),t}),(function(t){return f.a.done(),t})),D.interceptors.response.use((function(t){return f.a.done(),t}),(function(t){if(f.a.done(),"ECONNABORTED"!=t.code)return 400==t.response.status?V.push("Login"):void 0}));var j={login:function(t,e){return Object(_["a"])(regeneratorRuntime.mark((function a(){var s,r,n,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.next=2,D.post("/login",{username:t,password:e});case 2:if(s=a.sent,r=s.data,n=r.token,o=r.user,n){a.next=6;break}return a.abrupt("return",!1);case 6:return g.setItem(g.KEY.JWT_TOKEN,n),g.setItem(g.KEY.USER_INFO,o),D.defaults.headers.common.Authorization="Bearer ".concat(n),a.abrupt("return",!0);case 10:case"end":return a.stop()}}),a)})))()},getGoodsCats:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D.get("/getGoodsCats");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))()},getStaffs:function(){return Object(_["a"])(regeneratorRuntime.mark((function t(){var e;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,D.get("/getStaffs");case 2:return e=t.sent,t.abrupt("return",e.data);case 4:case"end":return t.stop()}}),t)})))()},saveGoods:function(t){return Object(_["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:g.setItem(g.KEY.CART_DATA,t),V.push("PlaceOrder");case 2:case"end":return e.stop()}}),e)})))()},getCustomer:function(t){return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,D.post("/getCustomer",{mem_id:t});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))()}},y={data:function(){return{username:"",password:"",loading:!1}},methods:{handleLogin:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,new Promise((function(t){return setTimeout(t,500)}));case 3:return e.next=5,j.login(t.username,t.password);case 5:a=e.sent,t.loading=!1,a?t.$router.push("Cart"):t.$message.error("Staff ID or password error!");case 8:case"end":return e.stop()}}),e)})))()}}},k=y,w=(a("5206"),Object(i["a"])(k,p,b,!1,null,"c00df55e",null)),x=w.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"table-top"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-back"},on:{click:t.backToCart}},[t._v("POS")])],1),a("table",{staticClass:"table-order-header"},[a("thead",[a("td",{attrs:{width:"100"}},[t._v("發票日期：")]),a("td",{attrs:{width:"165"}},[a("el-input",{attrs:{size:"small",readonly:""},model:{value:t.formData.invoice_date,callback:function(e){t.$set(t.formData,"invoice_date",e)},expression:"formData.invoice_date"}})],1),a("td",{attrs:{width:"120"}},[t._v("營業員 ：")]),a("td",{attrs:{width:"130"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.forceRefresh},model:{value:t.formData.sales,callback:function(e){t.$set(t.formData,"sales",e)},expression:"formData.sales"}},t._l(t.sales_options,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.name}})})),1)],1),a("td",{attrs:{colspan:"3"}},[a("el-radio-group",{staticClass:"line-height-30px",model:{value:t.formData.status,callback:function(e){t.$set(t.formData,"status",e)},expression:"formData.status"}},t._l(t.status_options,(function(e){return a("el-radio",{key:e.value,attrs:{label:e.label},on:{change:t.forceRefresh}})})),1),a("br"),a("el-radio-group",{staticClass:"line-height-30px",model:{value:t.formData.deposit_method,callback:function(e){t.$set(t.formData,"deposit_method",e)},expression:"formData.deposit_method"}},t._l(t.deposit_method_options,(function(e){return a("el-radio",{key:e.value,attrs:{label:e.label},on:{change:t.forceRefresh}})})),1),a("br"),a("el-radio-group",{model:{value:t.formData.delivery,callback:function(e){t.$set(t.formData,"delivery",e)},expression:"formData.delivery"}},t._l(t.delivery_options,(function(e){return a("el-radio",{key:e.value,attrs:{label:e.label},on:{change:t.forceRefresh}})})),1)],1)]),a("tr",[a("td",[t._v("送貨日期:")]),a("td",[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期",size:"small"},model:{value:t.delivery_date,callback:function(e){t.delivery_date=e},expression:"delivery_date"}})],1),t._m(0),a("td",{attrs:{colspan:"1"}},[a("el-input",{attrs:{placeholder:"请输入編號","prefix-icon":"el-icon-search",size:"small"},on:{input:t.forceRefresh,change:t.onMemIdChange},model:{value:t.formData.mem_id,callback:function(e){t.$set(t.formData,"mem_id",e)},expression:"formData.mem_id"}})],1),a("td",{attrs:{width:"237"}},[t._v("客戶名稱："),a("el-input",{staticClass:"medium-input",attrs:{size:"small"},on:{input:t.forceRefresh},model:{value:t.formData.mem_name,callback:function(e){t.$set(t.formData,"mem_name",e)},expression:"formData.mem_name"}})],1),a("td",{attrs:{width:"118"}},[t._v("會員級別"),a("el-input",{staticClass:"extra-small-input",attrs:{size:"small",readonly:""},model:{value:t.formData.mem_credit_level,callback:function(e){t.$set(t.formData,"mem_credit_level",e)},expression:"formData.mem_credit_level"}})],1),a("td",[a("div",{staticClass:"balance"},[a("el-input",{attrs:{size:"small",readonly:""},model:{value:t.formData.mem_dep_bal,callback:function(e){t.$set(t.formData,"mem_dep_bal",e)},expression:"formData.mem_dep_bal"}},[a("template",{slot:"prepend"},[t._v("現金結餘 : ")])],2),a("el-input",{attrs:{size:"small",readonly:""},model:{value:t.formData.mem_dep_bank_bal,callback:function(e){t.$set(t.formData,"mem_dep_bank_bal",e)},expression:"formData.mem_dep_bank_bal"}},[a("template",{slot:"prepend"},[t._v("銀行結餘 : ")])],2)],1)])]),a("tr",[a("td",[t._v("送貨時間：")]),a("td",{attrs:{colspan:"1"}},[a("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:t.forceRefresh},model:{value:t.formData.delivery_timeslot,callback:function(e){t.$set(t.formData,"delivery_timeslot",e)},expression:"formData.delivery_timeslot"}},t._l(t.timeslot_options,(function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})})),1)],1),a("td",{attrs:{colspan:"1"}},[t._v("收貨人：")]),a("td",{attrs:{colspan:"1"}},[a("el-input",{staticClass:"small-input",attrs:{size:"small"},model:{value:t.formData.receiver,callback:function(e){t.$set(t.formData,"receiver",e)},expression:"formData.receiver"}})],1),a("td",{attrs:{colspan:"3"}},[t._v("姓氏："),a("el-input",{staticClass:"medium-input",attrs:{size:"small"},model:{value:t.formData.lastname,callback:function(e){t.$set(t.formData,"lastname",e)},expression:"formData.lastname"}})],1)]),a("tr",[a("td",[t._v("會員remark：")]),a("td",{attrs:{colspan:"6"}},[a("el-input",{attrs:{size:"small"},on:{input:t.forceRefresh},model:{value:t.formData.mem_remark,callback:function(e){t.$set(t.formData,"mem_remark",e)},expression:"formData.mem_remark"}})],1)]),a("tr",[a("td",[t._v("入賬日期：")]),a("td",[a("el-date-picker",{attrs:{type:"datetime",placeholder:"选择日期",size:"small"},model:{value:t.settledate,callback:function(e){t.settledate=e},expression:"settledate"}})],1),t._m(1),a("td",{attrs:{colspan:"3"}},[a("el-input",{attrs:{size:"small"},on:{input:t.forceRefresh},model:{value:t.formData.mem_add,callback:function(e){t.$set(t.formData,"mem_add",e)},expression:"formData.mem_add"}})],1),a("td",[a("el-input",{attrs:{size:"small",readonly:""},model:{value:t.formData.mem_alert,callback:function(e){t.$set(t.formData,"mem_alert",e)},expression:"formData.mem_alert"}})],1)])]),a("table",{staticClass:"table-goods-list"},[a("thead",[a("td",{attrs:{width:"4%"}},[t._v("行數")]),a("td",{attrs:{width:"20%"}},[t._v("貨品編號")]),a("td",{attrs:{width:"7%"}},[t._v("數量")]),a("td",{attrs:{width:"30%"}},[t._v("項目")]),a("td",{attrs:{width:"9%"}},[t._v("單價")]),a("td",{attrs:{width:"7%"}},[t._v("折扣%")]),a("td",{staticClass:"text-align-center",attrs:{width:"5%"}},[t._v("行送")]),a("td",{staticClass:"text-align-center",attrs:{width:"6%"}},[t._v("界板")]),a("td",{staticClass:"text-align-center",attrs:{width:"6%"}},[t._v("出貨"),a("el-checkbox",{staticClass:"margin-left-5px",model:{value:t.delivery_all,callback:function(e){t.delivery_all=e},expression:"delivery_all"}})],1),a("td",{attrs:{width:"10%"}})]),a("tbody",t._l(t.tableData,(function(e,s){return a("tr",{key:e.goodsId},[a("td",{attrs:{width:"4%"}},[t._v(t._s(s+1))]),a("td",{attrs:{width:"20%"}},[t._v(t._s(e.goodsId))]),a("td",[a("el-input-number",{attrs:{min:1,size:"small",type:"number"},model:{value:e.count,callback:function(a){t.$set(e,"count",a)},expression:"item.count"}})],1),a("td",[t._v(t._s(e.goodsName))]),a("td",[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.price,callback:function(a){t.$set(e,"price",a)},expression:"item.price"}})],1),a("td",[a("el-input",{attrs:{size:"small",type:"number"},model:{value:e.discount,callback:function(a){t.$set(e,"discount",a)},expression:"item.discount"}})],1),a("td",{staticClass:"text-align-center"},[a("el-checkbox",{model:{value:e.deductStock,callback:function(a){t.$set(e,"deductStock",a)},expression:"item.deductStock"}})],1),a("td",{staticClass:"text-align-center"},[a("el-checkbox",{model:{value:e.cutting,callback:function(a){t.$set(e,"cutting",a)},expression:"item.cutting"}})],1),a("td",{staticClass:"text-align-center"},[a("el-checkbox",{model:{value:e.delivered,callback:function(a){t.$set(e,"delivered",a)},expression:"item.delivered"}})],1),a("td",{staticClass:"text-align-center"},[a("el-button",{attrs:{type:"warning",icon:"el-icon-delete",circle:"",size:"small"},on:{click:function(a){return t.onItemDelete(e)}}})],1)])})),0)]),a("table",{staticClass:"table-order-footer"},[a("thead",[a("td",{attrs:{width:"7%"}},[a("el-button",{attrs:{type:"info"},on:{click:t.onRestore}},[t._v("清除")])],1),a("td",{attrs:{width:"10%"}},[t._v("扶力費折扣：")]),a("td",{attrs:{width:"8%"}},[a("el-input",{staticClass:"extra-small-input",attrs:{size:"small",type:"number"},model:{value:t.formData.special_man_power_percent,callback:function(e){t.$set(t.formData,"special_man_power_percent",e)},expression:"formData.special_man_power_percent"}}),t._v(" % ")],1),a("td",{attrs:{width:"7%"}},[t._v("總折扣")]),a("td",{attrs:{width:"18%"}},[a("el-input",{staticClass:"extra-small-input",attrs:{size:"small",type:"number"},on:{input:t.forceRefresh},model:{value:t.formData.subdiscount,callback:function(e){t.$set(t.formData,"subdiscount",e)},expression:"formData.subdiscount"}}),t._v(" % "),a("el-input",{staticClass:"extra-small-input margin-left-5px",attrs:{size:"small",type:"number"},on:{input:t.forceRefresh},model:{value:t.formData.subdeduct,callback:function(e){t.$set(t.formData,"subdeduct",e)},expression:"formData.subdeduct"}}),t._v(" $")],1),a("td",{attrs:{width:"17%"}},[t._v("訂金"),a("el-input",{staticClass:"small-input margin-left-5px",attrs:{size:"small",type:"number"},on:{input:t.forceRefresh},model:{value:t.formData.diposit,callback:function(e){t.$set(t.formData,"diposit",e)},expression:"formData.diposit"}})],1),a("td",{attrs:{width:"17%"}},[a("el-button",{attrs:{type:"success"},on:{click:t.calculateTotal}},[t._v("暫計")]),a("el-input",{staticClass:"small-input margin-left-5px",attrs:{size:"small",readonly:""},model:{value:t.formData.count,callback:function(e){t.$set(t.formData,"count",e)},expression:"formData.count"}})],1),a("td",{attrs:{width:"8%"}},[t._v("信用卡"),a("el-checkbox",{staticClass:"margin-left-5px",on:{change:t.forceRefresh},model:{value:t.formData.creditcard,callback:function(e){t.$set(t.formData,"creditcard",e)},expression:"formData.creditcard"}})],1),a("td",{attrs:{width:"8%"}},[a("el-button",{attrs:{type:"danger"},on:{click:t.confirmOrder}},[t._v(" 送出")])],1)])])])},O=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("i",{staticClass:"el-icon-s-custom"},[t._v("客戶編號：")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("td",[a("i",{staticClass:"el-icon-location"},[t._v(" 送貨地址：")])])}],$=(a("7db0"),a("d81d"),a("a434"),a("b0c0"),a("b680"),a("c1df")),I=a.n($),R=a("2ef0"),S=a.n(R),T=[],z={name:"PlaceOrder",data:function(){return{delivery_date:null,settledate:null,delivery_all:!0,timeslot_options:[{value:1,label:"早 08:00-11:00"},{value:2,label:"午 11:01-14:00"},{value:3,label:"晚 14:01-18:00"}],sales_options:[],status_options:[{value:"A",label:"入賑"},{value:"S",label:"掛單"},{value:"D",label:"訂金"}],deposit_method_options:[{value:"C",label:"現金入賑"},{value:"D",label:"會員現金扣數"},{value:"B",label:"會員銀行扣數"}],delivery_options:[{value:"Y",label:"送貨"},{value:"S",label:"自取"},{value:"C",label:"街車即走"},{value:"W",label:"等電"}],tableData:[],formData:{special_man_power_percent:6}}},methods:{backToCart:function(){this.saveFormToStorage(),this.$router.push("Cart")},forceRefresh:function(){this.$forceUpdate()},confirmOrder:function(){this.formData.delivery_timeslot&&this.delivery_date?(this.calculateTotal(),this.saveFormToStorage(),g.setItem(g.KEY.CART_DATA,this.tableData),this.$router.push("ConfirmOrder")):this.$message({showClose:!0,message:"Please input delivery date and timeslot",type:"error"})},onMemIdChange:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.getCustomer(t.formData.mem_id);case 2:a=e.sent,S.a.assign(t.formData,a),t.$forceUpdate(),t.saveFormToStorage();case 6:case"end":return e.stop()}}),e)})))()},onItemDelete:function(t){this.tableData.splice(this.tableData.indexOf(t),1)},onRestore:function(){this.tableData=JSON.parse(JSON.stringify(T))},calculateTotal:function(){var t=0;this.tableData.map((function(e){var a=parseInt(e.count||0)*parseFloat(e.price||0)*(100-parseFloat(e.discount||0))/100;t+=a,e.subtotal=a.toFixed(2)})),this.formData.subtotal=t.toFixed(2),t=t*(100-parseFloat(this.formData.subdiscount||0))/100-parseFloat(this.formData.subdeduct),this.formData.creditcard?(this.formData.creditcard_fee=Math.round(.03*t),t+=this.formData.creditcard_fee):this.formData.creditcard_fee=0,this.formData.count=t.toFixed(2),this.$forceUpdate()},saveFormToStorage:function(){if(this.formData.delivery_timeslot&&(this.formData.delivery_timeslot_label=S.a.find(this.timeslot_options,{value:this.formData.delivery_timeslot}).label),this.formData.sales){var t=S.a.find(this.sales_options,{name:this.formData.sales});this.formData.pc=t.pc,this.formData.area=t.area}this.formData.delivery_date=this.delivery_date,this.formData.settledate=this.settledate,this.formData.diposit=parseFloat(this.formData.diposit||0).toFixed(2),this.formData.subdeduct=parseFloat(this.formData.subdeduct||0).toFixed(2),g.setItem(g.KEY.FORM_DATA,this.formData)},saveCartToStorage:function(){g.setItem(g.KEY.CART_DATA,this.tableData)},restoreFormFromStorage:function(){var t=g.getItem(g.KEY.FORM_DATA);this.delivery_date=t.delivery_date,this.settledate=t.settledate,S.a.assign(this.formData,t)}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.getStaffs();case 2:t.sales_options=e.sent,a=g.getItem(g.KEY.CART_DATA)||[],t.tableData=a.map((function(t){return void 0==t.delivered&&(t.delivered=!0),t.discount=0,t.price=parseFloat(t.price).toFixed(2),t})),T=JSON.parse(JSON.stringify(a)),t.formData.invoice_date=I()().format("YYYY-MM-DD HH:mm"),t.settledate=new Date,t.formData.sales=g.getItem(g.KEY.USER_INFO).name,t.restoreFormFromStorage();case 10:case"end":return e.stop()}}),e)})))()},watch:{delivery_all:function(t){this.tableData.map((function(e){e.delivered=t}))},tableData:{handler:function(){this.saveCartToStorage()},deep:!0}}},A=z,E=(a("a56e"),Object(i["a"])(A,C,O,!1,null,"7969b998",null)),N=E.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pos"},[a("el-row",[a("el-col",{attrs:{span:17}},[a("div",{staticClass:"often-goods"},[a("div",{staticClass:"title"},[t._v("常用商品"),a("el-input",{attrs:{placeholder:"goods Id"},on:{change:t.onSearchGoods},model:{value:t.goodsId,callback:function(e){t.goodsId=e},expression:"goodsId"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},slot:"append"})],1),a("el-button",{staticClass:"margin-left-10px",on:{click:t.clear}},[t._v("取消")])],1)]),a("div",{staticClass:"goods-type"},[a("el-tabs",t._l(t.tabData,(function(e){return a("el-tab-pane",{key:t.cat_id,attrs:{label:e.cat_name}},[a("el-tabs",t._l(e.child_cats,(function(e){return a("el-tab-pane",{key:t.cat_id,attrs:{label:e.cat_name}},[a("ul",{staticClass:"cookList"},t._l(e.goods_list,(function(e){return a("li",{key:t.goodsId,on:{click:function(a){return t.addOrderList(e)}}},[a("div",{staticClass:"food-content"},[a("span",{staticClass:"food-name"},[t._v(t._s(e.goodsName)+" "),a("i",[a("b",[t._v("("+t._s(e.goodsId)+")")])])]),a("span",{staticClass:"food-price"},[t._v("$"+t._s(e.price)+"元")])])])})),0)])})),1)],1)})),1)],1)]),a("el-col",{staticClass:"pos-order",attrs:{span:7}},[a("el-tabs",{model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"出售",name:"orderIng"}},[a("el-table",{attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{"render-header":t.renderHeader,width:"40"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-checkbox",{model:{value:e.row.selected,callback:function(a){t.$set(e.row,"selected",a)},expression:"scope.row.selected"}})]}}])}),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名"}}),a("el-table-column",{attrs:{label:"數量",width:"122"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input-number",{attrs:{size:"small"},on:{change:function(a){t.onNumberChanged(a,e.row)}},model:{value:e.row.count,callback:function(a){t.$set(e.row,"count",a)},expression:"scope.row.count"}})]}}])}),a("el-table-column",{attrs:{prop:"price",label:"金额",width:"70"}})],1)],1)],1),a("div",{staticClass:"foot-statistical"},[a("span",[a("small",[t._v("数量：")]),t._v(t._s(t.totalCount))]),a("span",[a("small",[t._v("金額：")]),t._v(t._s(t.totalMoney)+"元")])]),a("div",{staticClass:"foot-btn"},[a("el-button",{attrs:{type:"danger"},on:{click:t.delSelectedGoods}},[t._v("删除")]),a("el-button",{attrs:{type:"success"},on:{click:t.checkout}},[t._v("結賬")])],1)],1)],1)],1)},M=[],Y=(a("a4d3"),a("e01a"),a("d28b"),a("4de4"),a("4160"),a("4d63"),a("ac1f"),a("25f0"),a("3ca3"),a("466d"),a("159b"),a("ddb0"),{name:"cart",data:function(){return{tabData:[],goodsId:"",activeName:"orderIng",tableData:[],allData:[],totalCount:0,totalMoney:0}},methods:{clear:function(){this.goodsId="",this.onSearchGoods("")},renderHeader:function(t){var e=this;return t("el-checkbox",{on:{change:function(t){return e.tableData.map((function(e){return e.selected=t}))}},props:{boder:!0,size:"medium"}})},onSearchGoods:function(t){var e=JSON.parse(JSON.stringify(this.allData)),a=!0,s=!1,r=void 0;try{for(var n,o=e[Symbol.iterator]();!(a=(n=o.next()).done);a=!0){var l=n.value,i=!0,c=!1,d=void 0;try{for(var u,f=l.child_cats[Symbol.iterator]();!(i=(u=f.next()).done);i=!0){var m=u.value;m.goods_list=""==m.goods_list?[]:m.goods_list,m.goods_list=m.goods_list.filter((function(e){return!!e.goodsId.match(new RegExp(t,"i"))}))}}catch(p){c=!0,d=p}finally{try{i||null==f.return||f.return()}finally{if(c)throw d}}l.child_cats=l.child_cats.filter((function(t){return t.goods_list.length>0}))}}catch(p){s=!0,r=p}finally{try{a||null==o.return||o.return()}finally{if(s)throw r}}e=e.filter((function(t){return t.child_cats.length>0})),this.tabData=e},onNumberChanged:function(t,e){var a=this;setTimeout((function(){t<=0&&(a.tableData=a.tableData.filter((function(t){return t.goodsId!=e.goodsId}))),a.getAllMoney()}),1)},addOrderList:function(t){this.totalCount=0,this.totalMoney=0;for(var e=!1,a=0;a<this.tableData.length;a++)this.tableData[a].goodsId==t.goodsId&&(e=!0);if(e){var s=this.tableData.filter((function(e){return e.goodsId==t.goodsId}));s[0].count++}else{var r={goodsId:t.goodsId,goodsName:t.goodsName,price:t.price,count:1,selected:!1};this.tableData.push(r)}this.getAllMoney()},delSelectedGoods:function(){this.tableData=this.tableData.filter((function(t){return!t.selected})),this.getAllMoney()},delSingleGoods:function(t){this.tableData=this.tableData.filter((function(e){return e.goodsId!=t.goodsId})),this.getAllMoney()},delAllGoods:function(){this.tableData=[],this.totalCount=0,this.totalMoney=0},getAllMoney:function(){var t=this;this.totalCount=0,this.totalMoney=0,this.tableData&&this.tableData.forEach((function(e){t.totalCount+=e.count,t.totalMoney=t.totalMoney+e.price*e.count}))},checkout:function(){j.saveGoods(this.tableData)}},mounted:function(){var t=this;return Object(_["a"])(regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,j.getGoodsCats();case 2:a=e.sent,t.allData=JSON.parse(JSON.stringify(a)),t.tabData=a,t.tableData=g.getItem(g.KEY.CART_DATA)||[];case 6:case"end":return e.stop()}}),e)})))()}}),K=Y,J=(a("1425"),Object(i["a"])(K,F,M,!1,null,"41c2f8c7",null)),P=J.exports,G=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("table",{staticClass:"table-order-header"},[a("tr",[a("td",[t._v("發票日期：")]),a("td",[t._v(t._s(t.formData.invoice_date))]),a("td",[t._v("送貨日期：")]),a("td",[t._v(t._s(t.delivery_date))])]),a("tr",[a("td"),a("td"),a("td",[t._v("送貨時間：")]),a("td",[t._v(t._s(t.formData.delivery_timeslot_label))])]),a("tr",[a("td",[t._v("員工姓名：")]),a("td",[t._v(t._s(t.formData.sales))]),a("td",[t._v("送貨：")]),a("td",[t._v(t._s("送貨"==t.formData.delivery?"是":t.formData.delivery))])]),a("tr",[a("td",[t._v("客戶名稱：")]),a("td",[t._v(t._s(t.formData.mem_name))]),a("td",[t._v("收貨人：")]),a("td",[t._v(t._s(t.formData.receiver))])]),a("tr",[a("td"),a("td"),a("td",[t._v("姓氏：")]),a("td",[t._v(t._s(t.formData.lastname))])]),a("tr",[a("td",[t._v("客戶地址：")]),a("td",[t._v(t._s(t.formData.mem_add))]),a("td",[t._v("客戶編號：")]),a("td",[t._v(" "+t._s(t.formData.mem_id))])]),a("tr",[a("td",[t._v("入賬日期：")]),a("td",[t._v(t._s(t.formData.invoice_date))]),a("td",[t._v("入賑：")]),a("td",[t._v(t._s(t.formData.status))])])]),a("table",{staticClass:"table-goods-list"},[t._m(0),a("tbody",t._l(t.tableData,(function(e,s){return a("tr",{key:e.goodsId},[a("td",{attrs:{width:"4%"}},[t._v(t._s(s+1))]),a("td",{attrs:{width:"20%"}},[t._v(t._s(e.goodsId))]),a("td",[t._v(t._s(e.count))]),a("td",[t._v(t._s(e.goodsName))]),a("td",[t._v("$"+t._s(e.price))]),a("td",[t._v(t._s(e.discount))]),a("td",{staticClass:"text-align-center"},[t._v(t._s(e.deductStock?"Y":"N"))]),a("td",{staticClass:"text-align-center"},[t._v(t._s(e.cutting?"Y":"N"))]),a("td",{staticClass:"text-align-center"},[t._v(t._s(e.delivered?"Y":"N"))]),a("td",{staticClass:"text-align-center"},[t._v("$"+t._s(e.subtotal)+" ")])])})),0)]),a("table",{staticClass:"table-order-footer"},[t._m(1),a("tbody",[a("tr",[a("td",[t._v("合計：")]),a("td",[t._v("$"+t._s(t.formData.subtotal))])]),t._m(2),a("tr",[a("td",[t._v("扶力費折扣：")]),a("td",[t._v(t._s(t.formData.special_man_power_percent)+" %")])]),a("tr",[a("td",[t._v("總折扣：")]),a("td",[t._v("減"+t._s(t.formData.subdiscount)+"% 減"+t._s(t.formData.subdeduct)+"元 ")])]),a("tr",[a("td",[t._v("訂金：")]),a("td",[t._v("$"+t._s(t.formData.diposit))])]),a("tr",[a("td",[t._v("信用卡：")]),a("td",[t._v("$"+t._s(t.formData.creditcard_fee)+".00")])]),a("tr",[a("td",[t._v("總合計：")]),a("td",[t._v("$"+t._s(t.formData.count))])]),a("tr",[a("td",[a("el-button",{attrs:{type:"warning"},on:{click:t.backToCart}},[t._v("上一步 ")])],1),a("td",[a("el-button",{attrs:{type:"danger"}},[t._v("出3色單")])],1)])])])])},L=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("td",{attrs:{width:"4%"}},[t._v("行數")]),a("td",{attrs:{width:"20%"}},[t._v("貨品編號")]),a("td",{attrs:{width:"7%"}},[t._v("數量")]),a("td",{attrs:{width:"30%"}},[t._v("項目")]),a("td",{attrs:{width:"9%"}},[t._v("單價")]),a("td",{attrs:{width:"7%"}},[t._v("折扣%")]),a("td",{staticClass:"text-align-center",attrs:{width:"5%"}},[t._v("行送")]),a("td",{staticClass:"text-align-center",attrs:{width:"6%"}},[t._v("界板")]),a("td",{staticClass:"text-align-center",attrs:{width:"6%"}},[t._v("出貨")]),a("td",{attrs:{width:"10%"}},[t._v("Subtotal")])])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("td",{attrs:{width:"90%"}}),a("td")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("tr",[a("td",[t._v("扶力費：")]),a("td",[t._v("$0.00")])])}],U={name:"ConfirmOrder",data:function(){return{tableData:[],formData:{}}},computed:{delivery_date:function(){return this.formData.delivery_date?I()(this.formData.delivery_date).format("YYYY-MM-DD"):""}},methods:{backToCart:function(){this.$router.push("PlaceOrder")}},mounted:function(){this.tableData=g.getItem(g.KEY.CART_DATA)||[],this.formData=g.getItem(g.KEY.FORM_DATA)||{}}},W=U,B=(a("8347"),Object(i["a"])(W,G,L,!1,null,"449dcc79",null)),H=B.exports;s["default"].use(m["a"]);var q=[{path:"*",component:x},{path:"/Login",name:"Login",component:x},{path:"/Cart",name:"Cart",component:P},{path:"/PlaceOrder",name:"PlaceOrder",component:N},{path:"/ConfirmOrder",name:"ConfirmOrder",component:H}],Q=new m["a"]({mode:"history",base:"/ipad_app/",routes:q});Q.beforeEach((function(t,e,a){f.a.start();var s=["/","/Login"];if(-1==s.indexOf(t.path)&&!g.getItem(g.KEY.JWT_TOKEN))return Q.push("Login");a()})),Q.afterEach((function(){f.a.done()}));var V=Q,X=a("5c96"),Z=a.n(X);a("0fae");s["default"].use(Z.a);a("a5d8");s["default"].config.productionTip=!1,new s["default"]({router:V,render:function(t){return t(d)}}).$mount("#app")},8347:function(t,e,a){"use strict";var s=a("c9ab"),r=a.n(s);r.a},"85ec":function(t,e,a){},"8bb2":function(t,e,a){},a56e:function(t,e,a){"use strict";var s=a("03ea"),r=a.n(s);r.a},ae4d:function(t,e,a){},c9ab:function(t,e,a){}});
//# sourceMappingURL=app.js.map